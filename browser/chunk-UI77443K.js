import{a as U}from"./chunk-INEHA4U7.js";import{a as W}from"./chunk-K6AP43U6.js";import{a as Y}from"./chunk-RQS27VX5.js";import{b as D,d as R,f as B,j as N,k as j,l as q,n as H}from"./chunk-ZNZ7EOVE.js";import{D as v,G as h,H as O,J as e,K as r,L as u,M as y,N as d,O as b,P as n,Q as p,R as S,S as x,T as _,U as C,Y as T,Z as F,fa as k,ga as z,ha as E,ia as I,na as L,o as M,p as P,q as m,qa as A,r as g,ta as V,w as a,y as f,z as w}from"./chunk-PNWX4PDL.js";import"./chunk-2NFLSA4Y.js";function J(l,t){l&1&&(e(0,"div",17),m(),e(1,"svg",18),u(2,"path",19),r(),g(),e(3,"p"),n(4,"No hay t\xF3picos registrados."),r(),e(5,"p",20),n(6,"\xA1S\xE9 el primero en crear una discusi\xF3n!"),r()())}function K(l,t){if(l&1){let o=y();e(0,"div",21),d("click",function(){let c=M(o).$implicit,s=b();return P(s.mostrarTopicosAlInicio(c))}),e(1,"div",22)(2,"div",23),n(3),r(),e(4,"div",24)(5,"p",25),n(6),r(),e(7,"p",26),n(8,"respuestas"),r()()(),e(9,"div",27)(10,"h3"),n(11),r(),e(12,"p",28),n(13),r(),e(14,"div",29),n(15),r(),e(16,"div",30)(17,"div",31),m(),e(18,"svg",32),u(19,"path",33),r(),g(),e(20,"span"),n(21),T(22,"date"),r()(),e(23,"div",31),m(),e(24,"svg",32),u(25,"path",34),r(),g(),e(26,"span"),n(27),r()()()()()}if(l&2){let o=t.$implicit,i=t.index,c=b();O("animation-delay",i*.1+"s"),a(3),S(" ",c.obtenerInicial(o.usuario)," "),a(3),p(c.cantidadRespuestasPorTopico[o.id]||0),a(5),p(o.titulo),a(2),p(o.mensaje),a(2),p(o.nombreCurso),a(6),p(F(22,9,o.fechaCreacion,"short")),a(6),p(o.usuario)}}var G=class l{constructor(t,o,i,c){this.topicoService=t;this.router=o;this.respuestaService=i;this.authService=c}topicos=[];topicosFiltrados=[];cantidadRespuestasPorTopico={};textoBusqueda="";cursosUnicos=[];filtro="";misTopicos=[];mostrarSoloMisTopicos=!0;correoUsuarioLogueado="";ngOnInit(){this.cargarTopicos();let t=localStorage.getItem("usuarioLogin");this.correoUsuarioLogueado=t??"",this.cargarTopicos()}cargarTopicos(){this.topicoService.getTopicos().subscribe({next:t=>{this.topicos=t.content,this.misTopicos=this.topicos.filter(o=>o.usuario===this.correoUsuarioLogueado),this.aplicarFiltro(),this.topicos.forEach(o=>this.cantidadDeRespuestasEnForo(o.id))},error:t=>console.error("Error al cargar t\xF3picos",t)})}cargarMisTopicos(){let t=Number(localStorage.getItem("usuarioId"));if(!t){console.warn("No se encontr\xF3 el ID del usuario logueado.");return}this.topicoService.getTopicosPorUsuario(t).subscribe({next:o=>{this.misTopicos=o,this.aplicarFiltro()},error:o=>console.error("Error al cargar mis t\xF3picos",o)})}cantidadDeRespuestasEnForo(t){this.respuestaService.obtenerRespuestasPorTopico(t).subscribe({next:o=>{this.cantidadRespuestasPorTopico[t]=o.length},error:()=>{console.error(`No se pudieron contar las respuestas del t\xF3pico ${t}.`),this.cantidadRespuestasPorTopico[t]=0}})}irACrearTopico(){this.router.navigate(["/foro/crear"])}obtenerInicial(t){return t?.trim().charAt(0).toUpperCase()||"?"}mostrarTopicosAlInicio(t){this.router.navigate(["/foro/topico",t.id])}aplicarFiltroAlSeleccionar(){this.aplicarFiltro()}aplicarFiltroAlEscribir(){this.aplicarFiltro()}aplicarFiltro(){let t=this.mostrarSoloMisTopicos?this.misTopicos:this.topicos;if(!t){this.topicosFiltrados=[];return}let o=this.textoBusqueda.toLowerCase();this.topicosFiltrados=t.filter(i=>i.titulo.toLowerCase().includes(o))}volverAlLogin(){this.authService.logout()}logout(){this.authService.logout()}static \u0275fac=function(o){return new(o||l)(f(Y),f(A),f(W),f(U))};static \u0275cmp=w({type:l,selectors:[["app-foro-page"]],decls:25,vars:6,consts:[[1,"foro-container"],[1,"foro-header"],[1,"btn-inicio",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"btn-icon"],["fill-rule","evenodd","d","M3 9a1 1 0 011-1h10a1 1 0 110 2H4a1 1 0 01-1-1zm7-5a1 1 0 10-2 0v4a1 1 0 002 0V4z","clip-rule","evenodd"],[1,"crear-topico-btn",3,"click"],[1,"logout-btn","header-logout",3,"click"],["width","16","height","16","fill","currentColor","viewBox","0 0 16 16"],["d","M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"],["d","m10.5 8.5-.5-.5L8.5 6.5a.5.5 0 0 1 .5-.5h5.5a.5.5 0 0 1 0 1H9.5v.5h5.5a.5.5 0 0 1 0 1H9v.5L10.5 8.5z"],[1,"filtros"],["type","text","placeholder","Buscar por t\xEDtulo del t\xF3pico...",1,"input-busqueda",3,"ngModelChange","input","ngModel"],[1,"select-topicos",3,"ngModelChange","change","ngModel"],[3,"ngValue"],["class","sin-topicos",4,"ngIf"],[1,"topico-lista"],["class","topico-card",3,"animation-delay","click",4,"ngFor","ngForOf"],[1,"sin-topicos"],["width","64","height","64","fill","currentColor","viewBox","0 0 20 20",1,"icono-vacio"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule","evenodd"],[1,"subtitulo"],[1,"topico-card",3,"click"],[1,"sidebar"],[1,"avatar"],[1,"resumen"],[1,"cantidad"],[1,"etiqueta"],[1,"contenido-central"],[1,"mensaje"],[1,"info-curso"],[1,"meta"],[1,"meta-item"],["fill","currentColor","viewBox","0 0 20 20",1,"meta-icon"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule","evenodd"],["fill-rule","evenodd","d","M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule","evenodd"]],template:function(o,i){o&1&&(e(0,"div",0)(1,"div",1)(2,"button",2),d("click",function(){return i.volverAlLogin()}),m(),e(3,"svg",3),u(4,"path",4),r(),n(5," Volver al Inicio "),r(),g(),e(6,"h2"),n(7,"Foro de Discusi\xF3n"),r(),e(8,"button",5),d("click",function(){return i.irACrearTopico()}),n(9,"+ Crear T\xF3pico"),r()(),e(10,"button",6),d("click",function(){return i.logout()}),m(),e(11,"svg",7),u(12,"path",8)(13,"path",9),r(),n(14," Cerrar Sesi\xF3n "),r(),g(),e(15,"div",10)(16,"input",11),C("ngModelChange",function(s){return _(i.textoBusqueda,s)||(i.textoBusqueda=s),s}),d("input",function(){return i.aplicarFiltroAlEscribir()}),r(),e(17,"select",12),C("ngModelChange",function(s){return _(i.mostrarSoloMisTopicos,s)||(i.mostrarSoloMisTopicos=s),s}),d("change",function(){return i.aplicarFiltroAlSeleccionar()}),e(18,"option",13),n(19,"Mis T\xF3picos"),r(),e(20,"option",13),n(21,"Todos los T\xF3picos"),r()()(),v(22,J,7,0,"div",14),e(23,"div",15),v(24,K,28,12,"div",16),r()()),o&2&&(a(16),x("ngModel",i.textoBusqueda),a(),x("ngModel",i.mostrarSoloMisTopicos),a(),h("ngValue",!0),a(2),h("ngValue",!1),a(2),h("ngIf",i.topicosFiltrados.length===0),a(2),h("ngForOf",i.topicosFiltrados))},dependencies:[I,k,z,E,V,L,H,j,q,D,N,R,B],styles:['[_nghost-%COMP%]{--primary-color: #3b82f6;--primary-hover: #2563eb;--secondary-color: #f1f5f9;--accent-color: #10b981;--text-primary: #1e293b;--text-secondary: #64748b;--text-muted: #94a3b8;--border-color: #e2e8f0;--shadow-light: 0 1px 3px rgba(0, 0, 0, .1);--shadow-medium: 0 4px 6px rgba(0, 0, 0, .1);--shadow-large: 0 10px 25px rgba(0, 0, 0, .15);--border-radius: 12px;--transition: all .3s cubic-bezier(.4, 0, .2, 1)}.foro-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem 1rem;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;color:var(--text-primary);min-height:100vh}.foro-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:3rem;background:#fff;padding:2rem;border-radius:var(--border-radius);box-shadow:var(--shadow-medium);border:1px solid var(--border-color)}.foro-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;background:linear-gradient(135deg,var(--primary-color),var(--accent-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0}.crear-topico-btn[_ngcontent-%COMP%]{padding:.875rem 2rem;background:linear-gradient(135deg,var(--primary-color),var(--primary-hover));border:none;color:#fff;font-weight:600;font-size:.95rem;border-radius:var(--border-radius);cursor:pointer;transition:var(--transition);box-shadow:var(--shadow-light);position:relative;overflow:hidden}.crear-topico-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.crear-topico-btn[_ngcontent-%COMP%]:hover:before{left:100%}.crear-topico-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-large)}.sin-topicos[_ngcontent-%COMP%]{text-align:center;color:var(--text-muted);font-size:1.1rem;margin-top:4rem;padding:3rem;background:#fff;border-radius:var(--border-radius);box-shadow:var(--shadow-light);border:1px solid var(--border-color)}.sin-topicos[_ngcontent-%COMP%]   .icono-vacio[_ngcontent-%COMP%]{margin-bottom:1rem;opacity:.5}.sin-topicos[_ngcontent-%COMP%]   .subtitulo[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.9rem;opacity:.8}.topico-lista[_ngcontent-%COMP%]{display:grid;gap:2rem}.topico-card[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:var(--border-radius);padding:2rem;box-shadow:var(--shadow-light);border:1px solid var(--border-color);align-items:flex-start;gap:2rem;transition:var(--transition);cursor:pointer;position:relative;overflow:hidden;animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}.topico-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:linear-gradient(135deg,var(--primary-color),var(--accent-color));transform:scaleY(0);transition:transform .3s ease}.topico-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-large);border-color:var(--primary-color)}.topico-card[_ngcontent-%COMP%]:hover:before{transform:scaleY(1)}.sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-width:90px;gap:1rem}.avatar[_ngcontent-%COMP%]{width:60px;height:60px;background:linear-gradient(135deg,var(--primary-color),var(--accent-color));color:#fff;border-radius:50%;font-size:1.5rem;display:flex;align-items:center;justify-content:center;font-weight:700;box-shadow:var(--shadow-medium);transition:var(--transition)}.topico-card[_ngcontent-%COMP%]:hover   .avatar[_ngcontent-%COMP%]{transform:scale(1.1);box-shadow:var(--shadow-large)}.resumen[_ngcontent-%COMP%]{text-align:center;background:var(--secondary-color);padding:.75rem;border-radius:8px;width:100%}.resumen[_ngcontent-%COMP%]   .cantidad[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-primary);margin:0 0 .25rem}.resumen[_ngcontent-%COMP%]   .etiqueta[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px;font-weight:500;margin:0}.contenido-central[_ngcontent-%COMP%]{flex:1;min-width:0}.contenido-central[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.5rem;font-weight:700;color:var(--text-primary);line-height:1.3;transition:color .3s ease}.topico-card[_ngcontent-%COMP%]:hover   .contenido-central[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--primary-color)}.mensaje[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1rem;color:var(--text-secondary);line-height:1.6;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.info-curso[_ngcontent-%COMP%]{display:inline-flex;align-items:center;background:var(--secondary-color);color:var(--primary-color);padding:.5rem 1rem;border-radius:20px;font-size:.875rem;font-weight:600;margin-bottom:1rem}.meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;font-size:.875rem;color:var(--text-muted);margin-top:auto}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.meta-icon[_ngcontent-%COMP%]{width:16px;height:16px;opacity:.7;flex-shrink:0}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.topico-card.nuevo[_ngcontent-%COMP%]{border-left:4px solid var(--accent-color)}.topico-card.popular[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f60d,#10b9810d)}@media (max-width: 768px){.foro-container[_ngcontent-%COMP%]{padding:1rem}.foro-header[_ngcontent-%COMP%]{flex-direction:column;gap:1.5rem;text-align:center;padding:1.5rem}.foro-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.topico-card[_ngcontent-%COMP%]{flex-direction:column;padding:1.5rem;gap:1.5rem}.sidebar[_ngcontent-%COMP%]{flex-direction:row;width:100%;justify-content:flex-start;align-items:center;gap:1rem}.resumen[_ngcontent-%COMP%]{flex:0 0 auto;width:auto;min-width:80px}.meta[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}}@media (max-width: 480px){.foro-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem}.crear-topico-btn[_ngcontent-%COMP%], .btn-inicio[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:.9rem}.topico-card[_ngcontent-%COMP%]{padding:1rem}.avatar[_ngcontent-%COMP%]{width:50px;height:50px;font-size:1.2rem}}.filtros[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem;flex-wrap:wrap;align-items:center}.input-busqueda[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:1px solid var(--border-color);border-radius:var(--border-radius);font-size:1rem;color:var(--text-primary);background:#fff;box-shadow:var(--shadow-light);transition:border-color .3s ease}.input-busqueda[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);box-shadow:0 0 0 .2rem #3b82f640}.input-busqueda[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.select-topicos[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid var(--border-color);border-radius:var(--border-radius);font-size:1rem;color:var(--text-primary);background:#fff;box-shadow:var(--shadow-light);transition:border-color .3s ease}.select-topicos[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);box-shadow:0 0 0 .2rem #3b82f640}.select-topicos[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.btn-inicio[_ngcontent-%COMP%]{padding:.875rem 2rem;background:linear-gradient(135deg,var(--primary-color),var(--primary-hover));border:none;color:#fff;font-weight:600;font-size:.95rem;border-radius:var(--border-radius);cursor:pointer;transition:var(--transition);box-shadow:var(--shadow-light);position:relative;overflow:hidden}.btn-inicio[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn-inicio[_ngcontent-%COMP%]:hover:before{left:100%}.btn-inicio[_ngcontent-%COMP%]:hover{background:var(--primary-hover);transform:translateY(-1px);box-shadow:var(--shadow-light)}.btn-icon[_ngcontent-%COMP%]{width:20px;height:20px;fill:#fff}.logout-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:linear-gradient(135deg,#dc2626,#b91c1c);color:#fff;border:none;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 4px #dc262633;position:absolute;top:1rem;right:1rem;z-index:10}.logout-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#b91c1c,#991b1b);box-shadow:0 4px 8px #dc26264d;transform:translateY(-1px)}.logout-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 4px #dc262633}.logout-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;transition:transform .2s ease}.logout-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(2px)}@media (max-width: 768px){.logout-btn[_ngcontent-%COMP%]{position:relative;top:auto;right:auto;margin:.5rem;padding:.6rem .8rem;font-size:.8rem}}.foro-header[_ngcontent-%COMP%]{align-items:center;margin-bottom:2rem}.logout-btn.header-logout[_ngcontent-%COMP%]{position:static;margin-left:auto}']})};export{G as ForoPageComponent};
