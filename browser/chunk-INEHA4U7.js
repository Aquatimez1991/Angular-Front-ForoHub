import{b as a,f as r,i as n,ka as u,l as o,qa as c,ua as s}from"./chunk-PNWX4PDL.js";var l=class i{constructor(e,t){this.router=e;this.http=t;this.checkAuthStatus()}isAuthenticatedSubject=new a(!1);isAuthenticated$=this.isAuthenticatedSubject.asObservable();checkAuthStatus(){let e=localStorage.getItem("token"),t=localStorage.getItem("usuarioLogin");e&&t?this.isAuthenticatedSubject.next(!0):this.isAuthenticatedSubject.next(!1)}login(e){return this.http.post(`${s.apiUrl}/login`,e).pipe(r(t=>{t.token&&(localStorage.setItem("token",t.token),localStorage.setItem("usuarioLogin",e.login),this.isAuthenticatedSubject.next(!0))}))}logout(){localStorage.removeItem("token"),localStorage.removeItem("usuarioLogin"),this.isAuthenticatedSubject.next(!1),this.router.navigate(["/auth/login"])}isAuthenticated(){return this.isAuthenticatedSubject.value}static \u0275fac=function(t){return new(t||i)(o(c),o(u))};static \u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})};export{l as a};
